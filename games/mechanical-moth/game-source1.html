<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <title>Game Source </title>
</head>
<body><pre id="source">

// Легенда о Механическом Мотыльке

// инициализация параметры, только с помощью знака равно
// @param $paramName = paramValue 

@param $gold = 10 // золото собираем, на что-то тратим (подкуп, единоразовые действия)
@param $health = 100; // здоровье, будем страдать от чего-то, можем умереть
@param $intellect = 100 // интеллект
@param $spirit = 0 // алкогольное опьянение (прячем ряд действий, открывает уникальное воздействие)

 // также параметры можно задать как функции в объекте GameFunc во внешнем файле через config.js

// Заставка

# start: Механический мотылек
@hub Начать игру заново
Зима 1881 года окутала Лондон столь беспросветной морозной тоской, густо замешанной на смоге, что меня не радовал даже экзотический скелет человека-лягушки, присланный из американского города Мискатоник. <br /><br />

По сопроводительному письму, эти кости были добыты в опасной экспедиции и принадлежали какому-то злобному карлику. Действитель, по таблицам Чезаре Ломброзо у владельца черепа зашкаливали показатели ярости и первобытной жестокости. Но мой измерительный циркуль и опыт в дебрях Амазонки подсказывали, что передо мной скорее лежит скелет бычьей жабы, чем останки какого-то хтонического монстра. Кроме того, я устал от мифов и крайне запутанных писем, которыми заокеанские друзья бомбардировали меня последние годы. Мне хватало и легенд доброй старушки Англии. <br /><br />

И когда я вспомнил о легендах, то решил, что пора наведать моего приятеля по имени Шон Арлинг. Осталось сделать последний вопрос перед визитом:

* streetIntro: Выпить стакан бренди перед выходом... @param $spiritF(1); $intellectF(-5);
* streetIntro: ...или выйти на морозную улицу так?


# streetIntro: Морозные улицы Лондона

Я вышел в желто-серый туман, окутавший дома, вдохнул смог и закашлялся - скорее от резкого холода, чем от частиц угля. Нет, что ни говорите, а холод бодрит разум и тело - в определенных рамках, конечно. Вся сонная хмарь, навеянная странными письмами издалека, развеялась, как дым, от одного глотка крепкого лондонского воздуха.<br/><br />

Проезжающий мимо кэб остановился и извозчик посмотрел в мою сторону. Но я еще не решил, трястись ли в повозке по мостовой или пройтись немного пешком. Я так редко выходил из дома в последние дни зимы, что простая прогулка казалась уже увлекательным путешествием. <br/><br />

Я огляделся и постарался оценить, надолго ли меня хватит на таком холоде.

* street: Посмотреть по сторонам @param $healthFn(-5);


# street: Морозные улицы Лондона
@hub Вернуться к кэбу
Рядом со мной стоит свободный кэб. В доме напротив заседает пятничный клуб веселых холостяков. Вниз по улице горят огни винного магазина - я слышал, они недавно получили ценный груз из Бордо. Вверх по улице высится памятник капитану Смолетту. Дальше все скрывает туман и смог. Холодает.

* @oneway arlingIntro: Сесть в кэб @param $healthFn(-10);
* clubIntro: Заглянуть в клуб веселых холостяков @param $healthFn(5);
* vineIntro: Зайти в винную лавку @param $healthFn(5);
* smollett: Осмотреть статую. @param $healthFn(-10);
 
 
# arlingIntro : Кабинет Шона Арлинга

Вступление.... 













// ид локации можно писать на русском
# Трактир : Трактир Пьяное Яблоко
 @style light
В трактире шумно и пахнет пивом. // описание локации
* Улица : Выйти на улицу @param $playerGold = $playerGold + 10; $playerHealth = $playerHealth + 10;
 // с первой звездочки - переменный контент
 // todo 1 сделать func для сложных вычислений параметров
 // todo 2 в блоке же func сделать вторичную инициализацию параметров

* @if $playerGold>=100 @end Замок: Ты теперь богат и можешь войти в замок! @param $isRich = 1;

# Улица
 @style dark
На улице темно. Подозрительные тени маячат на углу.
* Трактир : Войти в трактир
* Церковь : Войти в церковь
* @oneway Замок

# Церковь
 @style light
В окне церкви горит свеча. Похоже, там кто-то есть.

# Замок
 @style light
Башни старого замка возвышаются над городом, как мрачные скалы.
 
</pre><script src="src-loader.js"></script>
</body>
</html>